<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Panel del Administrador - SelectStyle</title>
  <meta name="viewport" content="width=device-width,initial-scale=1.0" />
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
  <header class="site-header">
    <div class="logo">SelectStyle Admin</div>
    <nav class="nav">
      <a href="/">Tienda</a>
      <a href="/logout">Cerrar sesión</a>
    </nav>
  </header>

  <div class="page-content">
    <section class="admin-section">
      <h2>Camisas</h2>
      <div class="products-container">
        {% for shirt in shirts %}
          <div class="product-card {% if shirt[4] %}sold-out{% endif %}">
            <div class="image-wrapper">
              <img src="{{ url_for('static', filename='uploads/' + shirt[3]) }}" alt="{{ shirt[1] }}">
              {% if shirt[4] %}
                <div class="badge sold-out-label">AGOTADO</div>
              {% endif %}
            </div>
            <div class="info">
              <h3 class="name">{{ shirt[1] }}</h3>
              <div class="price-wrapper">
                <span class="price-current">${{ shirt[2] }}</span>
              </div>
              <div class="actions">
                <a href="/admin/toggle/{{ shirt[0] }}" class="btn-small">
                  {{ 'Quitar agotado' if shirt[4] else 'Marcar agotado' }}
                </a>
                <a href="/admin/delete/{{ shirt[0] }}" class="btn-small delete">Eliminar</a>
              </div>
            </div>
          </div>
        {% endfor %}
      </div>

      <hr />

      <h3>Subir nueva camisa</h3>
      <form method="POST" enctype="multipart/form-data" class="upload-form">
        <div>
          <input type="text" name="name" placeholder="Nombre" required>
        </div>
        <div>
          <input type="number" name="price" placeholder="Precio" required>
        </div>
        <div>
          <input type="file" name="image" accept="image/*" required>
        </div>
        <button type="submit">Subir</button>
      </form>
      <!-- - - - FORMULARIO: AGREGAR PAQUETE MAYORISTA - - - -->
<section class="admin-paquetes">
  <h2>Agregar paquete mayorista</h2>
  <form action="{{ url_for('add_paquete') }}" method="post" enctype="multipart/form-data">
    <div>
      <input type="text" name="nombre" placeholder="Nombre del paquete (ej. Paq 12 Lacoste)" required>
    </div>
    <div>
      <input type="text" name="descripcion" placeholder="Descripción (opcional)">
    </div>
    <div>
      <select name="cantidad" required>
        <option value="12">12 unidades</option>
        <option value="24">24 unidades</option>
        <option value="32">32 unidades</option>
      </select>
    </div>
    <div>
      <input type="number" name="precio" placeholder="Precio total (ej. 1200000)" required>
    </div>
    <div>
      <input type="file" name="imagen" accept="image/*">
    </div>
    <button type="submit">Subir paquete</button>
  </form>

  <h3>Paquetes existentes</h3>
  <div class="paquetes-list">
    {% if paquetes %}
      {% for p in paquetes %}
        {# p = (id, nombre, descripcion, precio, imagen, cantidad, agotado) #}
        <div class="paquete-card {% if p[6] %}agotado{% endif %}">
          {% if p[4] %}
            <img src="{{ url_for('static', filename='uploads/' + p[4]) }}" alt="{{ p[1] }}" width="140">
          {% endif %}
          <div class="paquete-info">
            <strong>{{ p[1] }}</strong><br>
            <small>{{ p[2] }}</small><br>
            Cantidad: {{ p[5] }} — Precio: ${{ p[3] }}<br>
            <form action="{{ url_for('delete_paquete', paquete_id=p[0]) }}" method="post" style="display:inline;">
              <button type="submit">Eliminar</button>
            </form>
            <form action="{{ url_for('toggle_paquete', paquete_id=p[0]) }}" method="post" style="display:inline;">
              {% if p[6] %}
                <button type="submit">Marcar disponible</button>
              {% else %}
                <button type="submit">Marcar agotado</button>
              {% endif %}
            </form>
          </div>
        </div>
      {% endfor %}
    {% else %}
      <p>No hay paquetes todavía.</p>
    {% endif %}
  </div>
</section>

    </section>
  </div>
</body>
</html>